<?xml version="1.0" encoding="windows-1252"?>
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi"
    xmlns:util="http://schemas.microsoft.com/wix/UtilExtension">

    <Product Name="Alacritty" Id="*" UpgradeCode="87c21c74-dbd5-4584-89d5-46d9cd0c40a7" Language="1033" Codepage="1252" Version="0.2.0">
        <Package InstallerVersion="200" Compressed="yes" InstallScope="perMachine"/>
        <MajorUpgrade AllowSameVersionUpgrades="yes" DowngradeErrorMessage="A newer version of [ProductName] is already installed."/>
        <Icon Id="AlacrittyIco" SourceFile="..\assets\windows\alacritty.ico"/>
        <WixVariable Id="WixUILicenseRtf" Value="license.rtf"/>
        <Property Id="ARPPRODUCTICON" Value="LogoIco"/>
        <MediaTemplate EmbedCab="yes"/>
        <UIRef Id="WixUI_Minimal"/>

        <Feature Id="ProductFeature" Title="ConsoleApp" Level="1">
            <ComponentRef Id="BinaryFiles"/>
            <ComponentRef Id="AlacrittyConfig"/>
        </Feature>

        <!-- Create directories -->
        <Directory Id="TARGETDIR" Name="SourceDir">
            <Directory Id="ProgramFiles64Folder">
                <Directory Id="AlacrittyProgramFiles" Name="Alacritty"/>
            </Directory>
            <Directory Id="CommonAppDataFolder">
                <Directory Id="AlacrittyCommonAppData" Name="Alacritty"/>
            </Directory>
        </Directory>

        <DirectoryRef Id="AlacrittyCommonAppData">
            <!-- Copy default config -->
            <Component Id="AlacrittyConfig" Guid="*" Permanent="yes">
                <File Id="AlacrittyConfigFile" Source="../alacritty.yml" Name="alacritty.yml" KeyPath="yes">
                    <Permission GenericAll="yes" User="Users"/>
                </File>
            </Component>
        </DirectoryRef>

        <DirectoryRef Id="AlacrittyProgramFiles">
            <!-- Application binaries -->
            <Component Id="BinaryFiles" Guid="*">
                <File Id="AlacrittyExeFile" Source="..\target\release\alacritty.exe" Name="alacritty.exe" KeyPath="yes"/>
                <File Id="WinPtyAgentExeFile" Source="..\target\release\winpty-agent.exe" Name="winpty-agent.exe" KeyPath="yes"/>
            </Component>
        </DirectoryRef>
    </Product>

</Wix>


